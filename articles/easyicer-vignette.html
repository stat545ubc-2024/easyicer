<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Transforming raw data into ICER plots using the easyicer package • easyicer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transforming raw data into ICER plots using the easyicer package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">easyicer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/easyicer-vignette.html">Transforming raw data into ICER plots using the easyicer package</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Transforming raw data into ICER plots using the easyicer package</h1>
            
      

      <div class="d-none name"><code>easyicer-vignette.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stat545ubc-2024.github.io/easyicer/">easyicer</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>This vignette is a tutorial on how to seamlessly create incremental
cost-effectiveness ratio (ICER) analyses, including plots, by making use
of all the functions in this package. This package was designed in a
pipeline structure so that the end-user could cohesively deploy the
package functions in a step-wise manner to arrive at a final
cost-effectiveness analysis (CEA) with ICER plots. For instructive
purposes, this vignette will be organized into 3 use-cases that can be
integrated as a single workflow or deployed standalone. The target
domain for this package is health technology assessment and economics,
where CEAs are a common tool for evaluating the risk-benefit of new
health interventions for implementation.</p>
</div>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The data used in this tutorial is a modified dataset obtained from
the authors’ research project. The full dataset is not publicly
available. The modified dataset used herein can be located in the <a href="https://github.com/stat545ubc-2024/easyicer" class="external-link">GitHub</a> repository
for this package. For the purpose of this tutorial, we will assign the
dataset to an object.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the "here" package to access the .csv file in the data folder if you are in the source package repository.</span></span>
<span><span class="va">easyicer_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"data/easyicer_data.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">easyicer_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 828   8</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">easyicer_data</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    cohort scr_age ppt_rate scr_mod year Cost_of_screen_x_reen_positives</span></span>
<span><span class="co">#&gt; 1    1973      50     0.18     FIT 2015                        27458883</span></span>
<span><span class="co">#&gt; 2    1973      50     0.18     FIT 2016                        27805623</span></span>
<span><span class="co">#&gt; 3    1973      50     0.18     FIT 2017                        27650384</span></span>
<span><span class="co">#&gt; 4    1973      50     0.18     FIT 2018                        16568149</span></span>
<span><span class="co">#&gt; 5    1973      50     0.18     FIT 2019                        16598985</span></span>
<span><span class="co">#&gt; 6    1973      50     0.18     FIT 2020                        17469883</span></span>
<span><span class="co">#&gt; 7    1973      50     0.18     FIT 2021                        17340106</span></span>
<span><span class="co">#&gt; 8    1973      50     0.18     FIT 2022                        17281809</span></span>
<span><span class="co">#&gt; 9    1973      50     0.18     FIT 2023                        22268950</span></span>
<span><span class="co">#&gt; 10   1973      50     0.18     FIT 2024                        29240148</span></span>
<span><span class="co">#&gt;    Cost_of_clinic_x_ow_up_protocol Health_adjusted_person_years</span></span>
<span><span class="co">#&gt; 1                          1660290                      2132296</span></span>
<span><span class="co">#&gt; 2                          3498682                      2141253</span></span>
<span><span class="co">#&gt; 3                          3764434                      2149907</span></span>
<span><span class="co">#&gt; 4                          6989066                      2151707</span></span>
<span><span class="co">#&gt; 5                          7421521                      2149004</span></span>
<span><span class="co">#&gt; 6                          7601313                      2147614</span></span>
<span><span class="co">#&gt; 7                          8097227                      2145495</span></span>
<span><span class="co">#&gt; 8                          8479750                      2142464</span></span>
<span><span class="co">#&gt; 9                          7999188                      2138152</span></span>
<span><span class="co">#&gt; 10                         8926254                      2132390</span></span></code></pre></div>
<p>The dataset contains 8 variables with 828 rows of observations. This
data was obtained from a microsimulation model projecting lifetime
health and economic outcomes of average-risk colorectal cancer screening
simulations in pre-defined Canadian birth cohorts. There are 4 predictor
variables, or characteristics (cohort, scr_age, ppt_rate, scr_mod,
year), and 3 outcome variables (including both cost outcomes and a
health outcome). See below for full variable definitions.</p>
<hr>
</div>
<div class="section level3">
<h3 id="variable-dictionary">Variable Dictionary<a class="anchor" aria-label="anchor" href="#variable-dictionary"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>cohort: A simulated birth cohort in the Canadian population with
modeled adenoma risk relative to the age group. Example: 1973 represents
a cohort of individuals born between 1973 and 1977.</p></li>
<li><p>scr_age: The modeled age of screening initiation for each
scenario. Example: 50 means that simulated individuals began screening
at age 50.</p></li>
<li><p>ppt_rate: The modeled participation rate for colorectal cancer
screening in the screening scenario. Example: 0.18 = 18% of the cohort
underwent screening.</p></li>
<li><p>scr_mod: The modality of the screening test. Either a fecal
immunochemical test (FIT) or a colonoscopy (f10q).</p></li>
<li><p>year: The corresponding year that outcomes were simulated
for.</p></li>
<li><p>Cost_of_screen_x_reen_positives: The total cost of screening,
including follow-up screening of positive cases.</p></li>
<li><p>Cost_of_clinic_x_ow_up_protocol: The cumulative cost incurred by
year from clinical diagnoses and follow-up procedures.</p></li>
<li><p>Health_adjusted_person_years: The estimated cumulative life years
of all individuals based on individually ascribed health utility scores.
Herein defined as quality-adjusted life years (QALY).</p></li>
</ol>
<hr>
</div>
<div class="section level3">
<h3 id="use-case-1-calculating-cumulative-outputs-for-cost-and-qaly-outcomes-with-summed_output">Use-Case 1: Calculating cumulative outputs for cost and QALY
outcomes with <code>summed_output()</code><a class="anchor" aria-label="anchor" href="#use-case-1-calculating-cumulative-outputs-for-cost-and-qaly-outcomes-with-summed_output"></a>
</h3>
<p>Often times with health economic data, we might get a large volume of
raw and unprocessed outputs. This is particularly the case for
simulation models that generate and display highly granular information.
Often times, the individual outputs are meaningless unless they are
transformed in some way (e.g., calculating a cumulative value) This is
where it is helpful to deploy the <code><a href="../reference/summed_output.html">summed_output()</a></code> function,
especially when this process is iterative. The
<code><a href="../reference/summed_output.html">summed_output()</a></code> function calculates the sum of a numeric
column in the dataset to arrive at a cumulative value. With this
dataset, this is valuable because we need to calculate the sum of each
output variable (costs and QALY) since they were originally calculated
per year. This function also allows the end-user to group by and filter
specific characteristics. For example, in our data, we have multiple
birth cohorts, screening ages and screening modalities that we want to
group by before calculating cumulative values. Lastly, the function can
handle any NA values that might otherwise disrupt the function
calculation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Set a filter parameter to call in filter_vars</span></span>
<span><span class="va">ppt18</span> <span class="op">&lt;-</span> <span class="va">easyicer_data</span><span class="op">$</span><span class="va">ppt_rate</span> <span class="op">==</span> <span class="fl">0.18</span></span>
<span></span>
<span><span class="co"># Calculate the cumulative values for the cost outcome</span></span>
<span><span class="va">cumulative_cost</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summed_output.html">summed_output</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">easyicer_data</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scr_mod"</span>, <span class="st">"scr_age"</span><span class="op">)</span>,</span>
<span>  sum_var <span class="op">=</span> <span class="st">"Cost_of_screen_x_reen_positives"</span>,</span>
<span>  filter_vars <span class="op">=</span> <span class="va">ppt18</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate the cumulative values for the health outcome</span></span>
<span><span class="va">cumulative_qaly</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/summed_output.html">summed_output</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">easyicer_data</span>,</span>
<span>  group_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"scr_mod"</span>, <span class="st">"scr_age"</span><span class="op">)</span>,</span>
<span>  sum_var <span class="op">=</span> <span class="st">"Health_adjusted_person_years"</span>,</span>
<span>  filter_vars <span class="op">=</span> <span class="va">ppt18</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cumulative_cost</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   scr_mod [2]</span></span></span>
<span><span class="co">#&gt;   scr_mod scr_age  cumulative</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FIT          45 <span style="text-decoration: underline;">2</span>694<span style="text-decoration: underline;">728</span>140.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FIT          50 <span style="text-decoration: underline;">2</span>517<span style="text-decoration: underline;">849</span>263.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> f10q         45 <span style="text-decoration: underline;">3</span>420<span style="text-decoration: underline;">224</span>126.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> f10q         50 <span style="text-decoration: underline;">3</span>312<span style="text-decoration: underline;">806</span>274.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cumulative_qaly</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   scr_mod [2]</span></span></span>
<span><span class="co">#&gt;   scr_mod scr_age cumulative</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> FIT          45 205<span style="text-decoration: underline;">541</span>825.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> FIT          50 205<span style="text-decoration: underline;">524</span>017.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> f10q         45 205<span style="text-decoration: underline;">610</span>208.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> f10q         50 205<span style="text-decoration: underline;">601</span>137.</span></span></code></pre></div>
<p>Now we have arrived at our necessary outputs to calculate ICERs. Did
you notice that this function is a general sum function with the ability
to sum by groups or filtered datasets? This function is not strictly
intended for calculating ICERs and is versatile with other purposes, but
it makes iterative sum calculations very convenient - especially when
calculating ICERs. Note that we did not specifically call
<code>na.rm = TRUE</code>, this is because it is set to
<code>TRUE</code> as default so if it is not called in the function it
will automatically remove NA values.</p>
<hr>
</div>
<div class="section level3">
<h3 id="use-case-2-calculating-icers-from-cumulative-cost-and-qaly-inputs-with-icercalc">Use-Case 2: Calculating ICERs from cumulative cost and QALY inputs
with <code>icercalc()</code><a class="anchor" aria-label="anchor" href="#use-case-2-calculating-icers-from-cumulative-cost-and-qaly-inputs-with-icercalc"></a>
</h3>
<p>Before we can calculate ICERs, we need to transform the data
structure so that the values are recognized in the correct order by the
<code><a href="../reference/icercalc.html">icercalc()</a></code> function. This is because with ICERs, there are
reference values that correspond with a reference or comparator
scenario/intervention. In the context of our dataset, this refers to
<code>scr_age = 50</code> and <code>scr_mod = FIT</code> (FIT 50), which
is the current colorectal cancer screening strategy in Canada. In order
to properly calculate the ICERs, the function expects a matrix structure
as illustrated:</p>
<pre><code>        ref     new
 cost   n00     n01
 qaly   n10     n11</code></pre>
<p>Once you have created a matrix, you might realize that the order of
values in the matrix is not correct. Instead of manually re-coding the
matrix, you can specify <code>rev =</code> as <code>"neither"</code>,
<code>"rows"</code>, <code>"columns"</code> or <code>"both"</code> to
reverse the order of the columns, rows, or columns and rows. By default
<code>rev = "neither"</code> so you do not need to specify the
<code>rev</code> argument if the matrix is correct. For instructive
purposes, the <code>rev</code> argument will be showcased below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Create matrix of cost and QALY values for each scenario</span></span>
<span><span class="va">icer_matrix_fit45</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate ICERs using matrix </span></span>
<span><span class="va">icer_fit45</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/icercalc.html">icercalc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">icer_matrix_fit45</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Modified matrix:"</span></span>
<span><span class="co">#&gt;            [,1]       [,2]</span></span>
<span><span class="co">#&gt; [1,] 2517849263 2694728140</span></span>
<span><span class="co">#&gt; [2,]  205524017  205541825</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Incremental Cost:</span></span>
<span><span class="co">#&gt;  176878878 </span></span>
<span><span class="co">#&gt; Incremental QALY:</span></span>
<span><span class="co">#&gt;  17807.78 </span></span>
<span><span class="co">#&gt; Incremental cost-effectiveness ratio (ICER):</span></span>
<span><span class="co">#&gt;  9932.676</span></span>
<span></span>
<span><span class="co"># Re-iteration for COL 45 scenario</span></span>
<span><span class="va">icer_matrix_col45</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">icer_col45</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/icercalc.html">icercalc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">icer_matrix_col45</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Modified matrix:"</span></span>
<span><span class="co">#&gt;            [,1]       [,2]</span></span>
<span><span class="co">#&gt; [1,] 2517849263 3420224126</span></span>
<span><span class="co">#&gt; [2,]  205524017  205610208</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Incremental Cost:</span></span>
<span><span class="co">#&gt;  902374863 </span></span>
<span><span class="co">#&gt; Incremental QALY:</span></span>
<span><span class="co">#&gt;  86190.82 </span></span>
<span><span class="co">#&gt; Incremental cost-effectiveness ratio (ICER):</span></span>
<span><span class="co">#&gt;  10469.5</span></span>
<span></span>
<span><span class="co"># # Re-iteration for COL 50 scenario</span></span>
<span><span class="va">icer_matrix_col50</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, <span class="co"># The columns of the matrix are purposefully in inverse order to demonstrate rev argument.</span></span>
<span>  <span class="va">cumulative_cost</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>,</span>
<span>  <span class="va">cumulative_qaly</span><span class="op">$</span><span class="va">cumulative</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">icer_col50</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/icercalc.html">icercalc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">icer_matrix_col50</span>, rev <span class="op">=</span> <span class="st">"columns"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Modified matrix:"</span></span>
<span><span class="co">#&gt;            [,1]       [,2]</span></span>
<span><span class="co">#&gt; [1,] 2517849263 3312806274</span></span>
<span><span class="co">#&gt; [2,]  205524017  205601137</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Incremental Cost:</span></span>
<span><span class="co">#&gt;  794957011 </span></span>
<span><span class="co">#&gt; Incremental QALY:</span></span>
<span><span class="co">#&gt;  77119.96 </span></span>
<span><span class="co">#&gt; Incremental cost-effectiveness ratio (ICER):</span></span>
<span><span class="co">#&gt;  10308.06</span></span></code></pre></div>
<p>The output of <code><a href="../reference/icercalc.html">icercalc()</a></code> displays the final matrix used
in the ICER calculation, the incremental cost output (difference in cost
between the new and reference scenarios), the incremental QALY
(difference in QALY between new and reference scenarios) and the ICER.
The component cost and QALY outcomes are displayed because if the end
user works with the entire easyicer pipeline, both values will be
required for the <code><a href="../reference/icerplot.html">icerplot()</a></code> function.</p>
<hr>
</div>
<div class="section level3">
<h3 id="use-case-3-creating-icer-plots-from-calculated-icers-with-icerplot">Use-Case 3: Creating ICER plots from calculated ICERs with
<code>icerplot()</code><a class="anchor" aria-label="anchor" href="#use-case-3-creating-icer-plots-from-calculated-icers-with-icerplot"></a>
</h3>
<p>The last stage of a basic CEA is to plot the ICERs along a coordinate
system. This is helpful for visually comparing how cost-effective
multiple interventions are relative to the reference intervention. The
<code><a href="../reference/icerplot.html">icerplot()</a></code> function creates a scatterplot based on a
dataframe with at least two numeric columns (representing cost and QALY
outcomes). An additional and optional <code>names</code> argument is
implemented which creates legend labels if the ICER values have
corresponding names.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a dataframe (if needed) with cost and QALY derivatives of ICER values.</span></span>
<span><span class="va">icer_coordinates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>intervention <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FIT 45"</span>, <span class="st">"COL 45"</span>, <span class="st">"COL 50"</span><span class="op">)</span>,</span>
<span>QALY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">17807.78</span>, <span class="fl">86190.82</span>, <span class="fl">77119.96</span><span class="op">)</span>,</span>
<span>Cost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">176878878</span>, <span class="fl">902374863</span>, <span class="fl">794957011</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/icerplot.html">icerplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">icer_coordinates</span>, x <span class="op">=</span> <span class="st">"QALY"</span>, y <span class="op">=</span> <span class="st">"Cost"</span>, names <span class="op">=</span> <span class="st">"intervention"</span><span class="op">)</span></span></code></pre></div>
<p><img src="easyicer-vignette_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Notice that you do not need the ICER outputs from
<code><a href="../reference/icercalc.html">icercalc()</a></code> to use this function. In fact, the ICER values
calculated with <code><a href="../reference/icercalc.html">icercalc()</a></code> will not work since both the
component costs and QALY outcomes are required in the dataframe, which
is why <code><a href="../reference/icercalc.html">icercalc()</a></code> provides both incremental costs and QALYs
as well as the ICER. This highlights that these functions can be used in
an integrated manner or independently based on the end user’s needs and
data structures.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brendan Chia.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
